<!DOCTYPE html>
<html>
<head>
<meta name='viewport' content='user-scalable=no, width=device-width, initial-scale=1'>
<link rel="icon" type="image/x-icon" href="favicon2.ico">


	
<!--<script>
var OneTrust = {
      dataSubjectParams: {
          id: "tester5@ot.com",
          isAnonymous: false,
          token : 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0ZXI1QG90LmNvbSJ9.x4hrUG1T4tfAtKY1Qq0xJ45njx3HpQIkmvO58qDRewk'
      }
};
</script>-->


<!-- OneTrust Cookies Consent Notice start for lucasdiazonetrust.github.io/webpagetesting/crossdomain.html -->
<script src="https://cdn.cookielaw.org/consent/0198d1a4-be79-7690-af83-7ebe0cb6108d-test/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="0198d1a4-be79-7690-af83-7ebe0cb6108d-test" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for lucasdiazonetrust.github.io/webpagetesting/crossdomain.html -->

	

	
<title>cookieid</title>
</head>
<body>
	
<h1>cookieid</h1>
	
<script>
//generating the OT identifier

function pushDS(){
	
var cook = OneTrust.getDataSubjectId();
console.log("OT user: "+cook);

// Helper: Base64URL encode
function base64url(source) {
  return btoa(String.fromCharCode(...new Uint8Array(source)))
    .replace(/=/g, '')
    .replace(/\+/g, '-')
    .replace(/\//g, '_');
}

// Helper: Encode string to Uint8Array
function encodeUTF8(str) {
  return new TextEncoder().encode(str);
}

// Main: Generate JWT
async function generateJWT(payload, secret) {
  const header = {
    alg: 'HS256',
    typ: 'JWT'
  };

  const encodedHeader = base64url(encodeUTF8(JSON.stringify(header)));
  const encodedPayload = base64url(encodeUTF8(JSON.stringify(payload)));
  const dataT = `${encodedHeader}.${encodedPayload}`;

  const key = await crypto.subtle.importKey(
    'raw',
    encodeUTF8(secret),
    { name: 'HMAC', hash: 'SHA-256' },
    false,
    ['sign']
  );

  const signature = await crypto.subtle.sign('HMAC', key, encodeUTF8(dataT));
  const encodedSignature = base64url(signature);

  return dataT + "." + encodedSignature;
}

//generating the JWT
var jwtgenerated = generateJWT({ sub: '660e091b-728c-4062-92bd-30aa2f29eb7c'}, 'b7f3c1a4e2d8f9a1c6e7b3d4a9f2c8e1d3b6a7c9f0e4d1b2a8c3f7e6d5b1a0c9').then(tokenT => console.log('JWT:', tokenT));

//pushing  the datasubject asynchronously
console.log("cookieID:" + cook + "jwtgenerated: " + tokenT)
OneTrust.syncConsentProfile(cook, tokenT, false);
}
</script>  

<input type="button" onClick="pushDS();" value="push DS to OT async"/>
	
<hr>
<iframe width="560" height="315" src="https://www.youtube.com/embed/TNqBv9h4_4Y?si=uL7FMKIHR6t7J1ey" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<hr>
<iframe src="https://player.vimeo.com/video/76979871" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
	
<!-- OneTrust Cookies Settings button start -->
<button id="ot-sdk-btn" class="ot-sdk-show-settings">Cookie Settings</button>
<!-- OneTrust Cookies Settings button end -->

<hr>



	
</body>
</html>
